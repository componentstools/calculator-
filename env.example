# =====================================================
# КОНФИГУРАЦИЯ СИСТЕМЫ КАЛЬКУЛЯТОРОВ
# =====================================================
# Скопируйте этот файл в .env и заполните своими данными

# =====================================================
# БАЗА ДАННЫХ POSTGRESQL
# =====================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=calculator_db
DB_USER=calculator_user
DB_PASSWORD=ваш_сложный_пароль_здесь

# Для MySQL (альтернатива):
# DB_DRIVER=mysql
# DB_PORT=3306

# =====================================================
# NEXAR / OCTOPART API
# =====================================================
NEXAR_CLIENT_ID=56c235c4-6100-446d-9246-b9f7e0a986cd
NEXAR_CLIENT_SECRET=yF2n6Ww_Ato9rKXxWdwVKULTZYk3ECQHHz34
NEXAR_TOKEN_URL=https://identity.nexar.com/connect/token
NEXAR_GRAPHQL_URL=https://api.nexar.com/graphql

# =====================================================
# TME API
# =====================================================
TME_API_KEY=ваш_tme_api_key
TME_API_SECRET=ваш_tme_api_secret
TME_API_URL=https://api.tme.eu

# Rate limiting (запросов в минуту)
TME_RATE_LIMIT=60

# =====================================================
# API НАСТРОЙКИ
# =====================================================
API_BASE_URL=https://api.components.tools
API_PORT=80

# JWT Secret для токенов авторизации (сгенерируйте случайную строку)
JWT_SECRET=ваш_очень_длинный_случайный_секрет_минимум_32_символа

# Время жизни токена (в секундах)
JWT_EXPIRY=3600

# =====================================================
# ВЕБ-СЕРВЕР
# =====================================================
WEB_SERVER=nginx
# WEB_SERVER=apache

DOMAIN=components.tools
WWW_ROOT=/var/www/components.tools

# SSL
SSL_ENABLED=true
SSL_CERT_PATH=/etc/letsencrypt/live/components.tools/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/components.tools/privkey.pem

# =====================================================
# КЭШИРОВАНИЕ
# =====================================================
# Время жизни кэша в секундах
CACHE_TTL_NEXAR=86400      # 24 часа
CACHE_TTL_TME=7200          # 2 часа
CACHE_TTL_CALCULATION=3600  # 1 час

# Redis (опционально, для продвинутого кэширования)
# REDIS_ENABLED=false
# REDIS_HOST=localhost
# REDIS_PORT=6379

# =====================================================
# ЛОГИРОВАНИЕ
# =====================================================
LOG_LEVEL=info  # debug, info, warning, error
LOG_PATH=/var/log/calculator
LOG_MAX_SIZE=100M
LOG_RETENTION_DAYS=30

# =====================================================
# EMAIL УВЕДОМЛЕНИЯ (опционально)
# =====================================================
SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=admin@components.tools
SMTP_PASSWORD=ваш_smtp_пароль
SMTP_FROM=noreply@components.tools

# =====================================================
# БИТРИКС ИНТЕГРАЦИЯ
# =====================================================
BITRIX_ENABLED=true
BITRIX_URL=https://components.tools
BITRIX_API_KEY=ваш_bitrix_webhook_key
BITRIX_CATALOG_IBLOCK_ID=17

# =====================================================
# OPENCART ИНТЕГРАЦИЯ
# =====================================================
OPENCART_ENABLED=false
OPENCART_URL=https://shop.components.tools
OPENCART_API_KEY=ваш_opencart_api_key

# =====================================================
# СИНХРОНИЗАЦИЯ
# =====================================================
# Batch размер для синхронизации
SYNC_BATCH_SIZE=100

# Приоритеты синхронизации
SYNC_PRIORITY_HIGH=100
SYNC_PRIORITY_NORMAL=50
SYNC_PRIORITY_LOW=10

# Максимальное количество попыток
SYNC_MAX_ATTEMPTS=3

# =====================================================
# БЕЗОПАСНОСТЬ
# =====================================================
# Rate limiting для API
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=60       # запросов
RATE_LIMIT_PERIOD=60         # за период (сек)

# CORS
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=https://components.tools,https://admin.components.tools

# =====================================================
# МОНИТОРИНГ
# =====================================================
# Sentry (опционально, для отслеживания ошибок)
SENTRY_ENABLED=false
SENTRY_DSN=your_sentry_dsn_here

# New Relic (опционально)
NEWRELIC_ENABLED=false
NEWRELIC_LICENSE_KEY=your_newrelic_key

# =====================================================
# БЭКАПЫ
# =====================================================
BACKUP_ENABLED=true
BACKUP_PATH=/backups
BACKUP_RETENTION_DAYS=30
BACKUP_TIME=04:00  # Время выполнения бэкапа

# =====================================================
# РАЗРАБОТКА
# =====================================================
DEBUG_MODE=false
DEV_MODE=false

# Для локальной разработки:
# DEBUG_MODE=true
# DEV_MODE=true
# API_BASE_URL=http://localhost:8000
# DOMAIN=localhost

# =====================================================
# РАСШИРЕННЫЕ НАСТРОЙКИ
# =====================================================

# Максимальное количество деталей в одном запросе
MAX_PARTS_PER_REQUEST=100

# Timeout для внешних API (секунды)
API_TIMEOUT=30

# Максимальный размер загружаемого файла (MB)
MAX_UPLOAD_SIZE=10

# =====================================================
# ПРИМЕЧАНИЯ
# =====================================================
# 
# 1. После изменения .env перезапустите сервисы:
#    sudo systemctl restart nginx php-fpm
#
# 2. Не добавляйте .env в git:
#    echo ".env" >> .gitignore
#
# 3. Для генерации JWT_SECRET используйте:
#    openssl rand -base64 32
#
# 4. Проверьте права на файл:
#    chmod 600 .env
#    chown www-data:www-data .env
#
# 5. Для production обязательно:
#    - Измените все пароли
#    - Включите SSL
#    - Настройте firewall
#    - Включите бэкапы
#
# =====================================================
